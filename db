-- Crear la base de datos
CREATE DATABASE nombre_de_la_base_de_datos;
USE nombre_de_la_base_de_datos;

-- Crear la tabla de usuarios
CREATE TABLE usuarios (
    id_usuario INT AUTO_INCREMENT PRIMARY KEY,
    nombre VARCHAR(100) NOT NULL,
    correo VARCHAR(320) NOT NULL
);

-- Crear la tabla de permisos
CREATE TABLE permisos (
    id_permiso INT AUTO_INCREMENT PRIMARY KEY,
    nombre VARCHAR(50) NOT NULL,
    descripcion TEXT
);

-- Crear la tabla de roles
CREATE TABLE roles (
    id_rol INT AUTO_INCREMENT PRIMARY KEY,
    nombre VARCHAR(50) NOT NULL,
    maximo_privilegio TINYINT
);

-- Crear la tabla intermedia para roles y permisos
CREATE TABLE roles_permisos (
    id_rol INT,
    id_permiso INT,
    PRIMARY KEY (id_rol, id_permiso),
    FOREIGN KEY (id_rol) REFERENCES roles(id_rol),
    FOREIGN KEY (id_permiso) REFERENCES permisos(id_permiso)
);

-- Crear la tabla intermedia para usuarios y roles
CREATE TABLE usuario_roles (
    id_usuario INT,
    id_rol INT,
    PRIMARY KEY (id_usuario, id_rol),
    FOREIGN KEY (id_usuario) REFERENCES usuarios(id_usuario),
    FOREIGN KEY (id_rol) REFERENCES roles(id_rol)
);

-- Insertar datos de ejemplo en la tabla de usuarios
INSERT INTO usuarios (nombre, correo) VALUES
('Christopher Alvarez', 'christopheralvarez503@gmail.com');

-- Insertar datos de ejemplo en la tabla de permisos
INSERT INTO permisos (nombre, descripcion) VALUES
('Leer', 'Permiso para leer datos'),
('Escribir', 'Permiso para escribir datos'),
('Eliminar', 'Permiso para eliminar datos');

-- Insertar datos de ejemplo en la tabla de roles
INSERT INTO roles (nombre, maximo_privilegio) VALUES
('Administrador', 1),
('Editor', 2),
('Lector', 3);

-- Insertar datos de ejemplo en la tabla roles_permisos
INSERT INTO roles_permisos (id_rol, id_permiso) VALUES
(1, 1), -- Administrador puede Leer
(1, 2), -- Administrador puede Escribir
(1, 3), -- Administrador puede Eliminar
(2, 1), -- Editor puede Leer
(2, 2); -- Editor puede Escribir

-- Insertar datos de ejemplo en la tabla usuario_roles
INSERT INTO usuario_roles (id_usuario, id_rol) VALUES
(1, 1) -- Christopher Alvarez es Administrador
